{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":62},"end":{"line":4,"column":33,"index":95}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"zustand/middleware","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":96},"end":{"line":5,"column":64,"index":160}}],"key":"YMP0j6stqbYl0MJAKxYubYnfTz0=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":161},"end":{"line":6,"column":69,"index":230}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useUserStore\", {\n    enumerable: true,\n    get: function () {\n      return useUserStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _zustandMiddleware = require(_dependencyMap[1], \"zustand/middleware\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  /**\n   * User store with Zustand + AsyncStorage persistence\n   */\n\n  // Check if cached verse is stale (> 24h)\n  const isCachedVerseStale = updatedAt => {\n    const cached = new Date(updatedAt);\n    const now = new Date();\n    const diffHours = (now.getTime() - cached.getTime()) / (1000 * 60 * 60);\n    return diffHours > 24;\n  };\n  const useUserStore = (0, _zustand.create)()((0, _zustandMiddleware.persist)((set, get) => ({\n    // Initial state\n    locale: 'en',\n    translation: 'kjv',\n    onboardingCompleted: false,\n    subscriptionStatus: 'free',\n    needsServerValidation: false,\n    originalTransactionId: undefined,\n    trialEndsAt: undefined,\n    answersCount: 0,\n    cachedDailyVerses: {},\n    showPaywall: false,\n    // Actions\n    setLocale: locale => {\n      const state = get();\n      const oldTranslation = state.translation;\n      set({\n        locale\n      });\n\n      // Update translation based on locale\n      const newTranslation = locale === 'en' ? 'kjv' : 'rst';\n      set({\n        translation: newTranslation\n      });\n\n      // Invalidate old translation cache when switching\n      if (oldTranslation !== newTranslation) {\n        get().invalidateDailyVerseCache(oldTranslation);\n      }\n    },\n    setTranslation: translation => {\n      const state = get();\n      const oldTranslation = state.translation;\n      set({\n        translation\n      });\n\n      // Invalidate old translation cache\n      if (oldTranslation !== translation) {\n        get().invalidateDailyVerseCache(oldTranslation);\n      }\n    },\n    completeOnboarding: () => set({\n      onboardingCompleted: true\n    }),\n    setSubscriptionStatus: status => set({\n      subscriptionStatus: status\n    }),\n    setSubscription: data => set({\n      subscriptionStatus: data.status,\n      needsServerValidation: data.needsServerValidation ?? false,\n      trialEndsAt: data.trialEndsAt,\n      originalTransactionId: data.originalTransactionId\n    }),\n    resetSubscription: () => set({\n      subscriptionStatus: 'free',\n      needsServerValidation: false,\n      trialEndsAt: undefined,\n      originalTransactionId: undefined\n    }),\n    incrementAnswersCount: () => set(state => ({\n      answersCount: state.answersCount + 1\n    })),\n    resetAnswersCount: () => set({\n      answersCount: 0\n    }),\n    setCachedDailyVerse: (translationId, verse) => {\n      const key = `dailyVerse:${translationId}`;\n      set(state => ({\n        cachedDailyVerses: {\n          ...state.cachedDailyVerses,\n          [key]: {\n            verse,\n            updatedAt: new Date().toISOString()\n          }\n        }\n      }));\n    },\n    getCachedDailyVerse: translationId => {\n      const key = `dailyVerse:${translationId}`;\n      const cached = get().cachedDailyVerses[key];\n      if (!cached) return null;\n\n      // Check if stale\n      if (isCachedVerseStale(cached.updatedAt)) {\n        return null;\n      }\n      return cached;\n    },\n    invalidateDailyVerseCache: translationId => {\n      const key = `dailyVerse:${translationId}`;\n      set(state => {\n        const newCache = {\n          ...state.cachedDailyVerses\n        };\n        delete newCache[key];\n        return {\n          cachedDailyVerses: newCache\n        };\n      });\n    },\n    setShowPaywall: show => set({\n      showPaywall: show\n    }),\n    // Computed selectors\n    isSubscribed: () => {\n      const state = get();\n      return state.subscriptionStatus === 'active' && !state.needsServerValidation;\n    },\n    isGated: () => {\n      const state = get();\n      return !get().isSubscribed() && state.answersCount >= 2;\n    }\n  }), {\n    name: 'bc_user_v1',\n    storage: (0, _zustandMiddleware.createJSONStorage)(() => AsyncStorage.default)\n  }));\n});","lineCount":151,"map":[[12,2,53,0,"Object"],[12,8,53,0],[12,9,53,0,"defineProperty"],[12,23,53,0],[12,24,53,0,"exports"],[12,31,53,0],[13,4,53,0,"enumerable"],[13,14,53,0],[14,4,53,0,"get"],[14,7,53,0],[14,18,53,0,"get"],[14,19,53,0],[15,6,53,0],[15,13,53,0,"useUserStore"],[15,25,53,0],[16,4,53,0],[17,2,53,0],[18,2,4,0],[18,6,4,0,"_zustand"],[18,14,4,0],[18,17,4,0,"require"],[18,24,4,0],[18,25,4,0,"_dependencyMap"],[18,39,4,0],[19,2,5,0],[19,6,5,0,"_zustandMiddleware"],[19,24,5,0],[19,27,5,0,"require"],[19,34,5,0],[19,35,5,0,"_dependencyMap"],[19,49,5,0],[20,2,6,0],[20,6,6,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,6,0],[20,45,6,0,"require"],[20,52,6,0],[20,53,6,0,"_dependencyMap"],[20,67,6,0],[21,2,6,0],[21,6,6,0,"AsyncStorage"],[21,18,6,0],[21,21,6,0,"_interopDefault"],[21,36,6,0],[21,37,6,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,6,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[26,2,45,0],[27,2,46,0],[27,8,46,6,"isCachedVerseStale"],[27,26,46,24],[27,29,46,28,"updatedAt"],[27,38,46,45],[27,42,46,59],[28,4,47,2],[28,10,47,8,"cached"],[28,16,47,14],[28,19,47,17],[28,23,47,21,"Date"],[28,27,47,25],[28,28,47,26,"updatedAt"],[28,37,47,35],[28,38,47,36],[29,4,48,2],[29,10,48,8,"now"],[29,13,48,11],[29,16,48,14],[29,20,48,18,"Date"],[29,24,48,22],[29,25,48,23],[29,26,48,24],[30,4,49,2],[30,10,49,8,"diffHours"],[30,19,49,17],[30,22,49,20],[30,23,49,21,"now"],[30,26,49,24],[30,27,49,25,"getTime"],[30,34,49,32],[30,35,49,33],[30,36,49,34],[30,39,49,37,"cached"],[30,45,49,43],[30,46,49,44,"getTime"],[30,53,49,51],[30,54,49,52],[30,55,49,53],[30,60,49,58],[30,64,49,62],[30,67,49,65],[30,69,49,67],[30,72,49,70],[30,74,49,72],[30,75,49,73],[31,4,50,2],[31,11,50,9,"diffHours"],[31,20,50,18],[31,23,50,21],[31,25,50,23],[32,2,51,0],[32,3,51,1],[33,2,53,7],[33,8,53,13,"useUserStore"],[33,20,53,25],[33,23,53,28],[33,27,53,28,"create"],[33,35,53,34],[33,36,53,34,"create"],[33,42,53,34],[33,44,53,46],[33,45,53,47],[33,46,53,48],[33,50,53,48,"persist"],[33,68,53,55],[33,69,53,55,"persist"],[33,76,53,55],[33,78,54,2],[33,79,54,3,"set"],[33,82,54,6],[33,84,54,8,"get"],[33,87,54,11],[33,93,54,17],[34,4,55,4],[35,4,56,4,"locale"],[35,10,56,10],[35,12,56,12],[35,16,56,16],[36,4,57,4,"translation"],[36,15,57,15],[36,17,57,17],[36,22,57,22],[37,4,58,4,"onboardingCompleted"],[37,23,58,23],[37,25,58,25],[37,30,58,30],[38,4,59,4,"subscriptionStatus"],[38,22,59,22],[38,24,59,24],[38,30,59,30],[39,4,60,4,"needsServerValidation"],[39,25,60,25],[39,27,60,27],[39,32,60,32],[40,4,61,4,"originalTransactionId"],[40,25,61,25],[40,27,61,27,"undefined"],[40,36,61,36],[41,4,62,4,"trialEndsAt"],[41,15,62,15],[41,17,62,17,"undefined"],[41,26,62,26],[42,4,63,4,"answersCount"],[42,16,63,16],[42,18,63,18],[42,19,63,19],[43,4,64,4,"cachedDailyVerses"],[43,21,64,21],[43,23,64,23],[43,24,64,24],[43,25,64,25],[44,4,65,4,"showPaywall"],[44,15,65,15],[44,17,65,17],[44,22,65,22],[45,4,67,4],[46,4,68,4,"setLocale"],[46,13,68,13],[46,15,68,16,"locale"],[46,21,68,22],[46,25,68,27],[47,6,69,6],[47,12,69,12,"state"],[47,17,69,17],[47,20,69,20,"get"],[47,23,69,23],[47,24,69,24],[47,25,69,25],[48,6,70,6],[48,12,70,12,"oldTranslation"],[48,26,70,26],[48,29,70,29,"state"],[48,34,70,34],[48,35,70,35,"translation"],[48,46,70,46],[49,6,72,6,"set"],[49,9,72,9],[49,10,72,10],[50,8,72,12,"locale"],[51,6,72,19],[51,7,72,20],[51,8,72,21],[53,6,74,6],[54,6,75,6],[54,12,75,12,"newTranslation"],[54,26,75,26],[54,29,75,29,"locale"],[54,35,75,35],[54,40,75,40],[54,44,75,44],[54,47,75,47],[54,52,75,52],[54,55,75,55],[54,60,75,60],[55,6,76,6,"set"],[55,9,76,9],[55,10,76,10],[56,8,76,12,"translation"],[56,19,76,23],[56,21,76,25,"newTranslation"],[57,6,76,40],[57,7,76,41],[57,8,76,42],[59,6,78,6],[60,6,79,6],[60,10,79,10,"oldTranslation"],[60,24,79,24],[60,29,79,29,"newTranslation"],[60,43,79,43],[60,45,79,45],[61,8,80,8,"get"],[61,11,80,11],[61,12,80,12],[61,13,80,13],[61,14,80,14,"invalidateDailyVerseCache"],[61,39,80,39],[61,40,80,40,"oldTranslation"],[61,54,80,54],[61,55,80,55],[62,6,81,6],[63,4,82,4],[63,5,82,5],[64,4,84,4,"setTranslation"],[64,18,84,18],[64,20,84,21,"translation"],[64,31,84,32],[64,35,84,37],[65,6,85,6],[65,12,85,12,"state"],[65,17,85,17],[65,20,85,20,"get"],[65,23,85,23],[65,24,85,24],[65,25,85,25],[66,6,86,6],[66,12,86,12,"oldTranslation"],[66,26,86,26],[66,29,86,29,"state"],[66,34,86,34],[66,35,86,35,"translation"],[66,46,86,46],[67,6,88,6,"set"],[67,9,88,9],[67,10,88,10],[68,8,88,12,"translation"],[69,6,88,24],[69,7,88,25],[69,8,88,26],[71,6,90,6],[72,6,91,6],[72,10,91,10,"oldTranslation"],[72,24,91,24],[72,29,91,29,"translation"],[72,40,91,40],[72,42,91,42],[73,8,92,8,"get"],[73,11,92,11],[73,12,92,12],[73,13,92,13],[73,14,92,14,"invalidateDailyVerseCache"],[73,39,92,39],[73,40,92,40,"oldTranslation"],[73,54,92,54],[73,55,92,55],[74,6,93,6],[75,4,94,4],[75,5,94,5],[76,4,96,4,"completeOnboarding"],[76,22,96,22],[76,24,96,24,"completeOnboarding"],[76,25,96,24],[76,30,96,30,"set"],[76,33,96,33],[76,34,96,34],[77,6,96,36,"onboardingCompleted"],[77,25,96,55],[77,27,96,57],[78,4,96,62],[78,5,96,63],[78,6,96,64],[79,4,98,4,"setSubscriptionStatus"],[79,25,98,25],[79,27,98,28,"status"],[79,33,98,34],[79,37,98,39,"set"],[79,40,98,42],[79,41,98,43],[80,6,98,45,"subscriptionStatus"],[80,24,98,63],[80,26,98,65,"status"],[81,4,98,72],[81,5,98,73],[81,6,98,74],[82,4,100,4,"setSubscription"],[82,19,100,19],[82,21,100,22,"data"],[82,25,100,26],[82,29,100,31,"set"],[82,32,100,34],[82,33,100,35],[83,6,101,6,"subscriptionStatus"],[83,24,101,24],[83,26,101,26,"data"],[83,30,101,30],[83,31,101,31,"status"],[83,37,101,37],[84,6,102,6,"needsServerValidation"],[84,27,102,27],[84,29,102,29,"data"],[84,33,102,33],[84,34,102,34,"needsServerValidation"],[84,55,102,55],[84,59,102,59],[84,64,102,64],[85,6,103,6,"trialEndsAt"],[85,17,103,17],[85,19,103,19,"data"],[85,23,103,23],[85,24,103,24,"trialEndsAt"],[85,35,103,35],[86,6,104,6,"originalTransactionId"],[86,27,104,27],[86,29,104,29,"data"],[86,33,104,33],[86,34,104,34,"originalTransactionId"],[87,4,105,4],[87,5,105,5],[87,6,105,6],[88,4,107,4,"resetSubscription"],[88,21,107,21],[88,23,107,23,"resetSubscription"],[88,24,107,23],[88,29,107,29,"set"],[88,32,107,32],[88,33,107,33],[89,6,108,6,"subscriptionStatus"],[89,24,108,24],[89,26,108,26],[89,32,108,32],[90,6,109,6,"needsServerValidation"],[90,27,109,27],[90,29,109,29],[90,34,109,34],[91,6,110,6,"trialEndsAt"],[91,17,110,17],[91,19,110,19,"undefined"],[91,28,110,28],[92,6,111,6,"originalTransactionId"],[92,27,111,27],[92,29,111,29,"undefined"],[93,4,112,4],[93,5,112,5],[93,6,112,6],[94,4,114,4,"incrementAnswersCount"],[94,25,114,25],[94,27,114,27,"incrementAnswersCount"],[94,28,114,27],[94,33,114,33,"set"],[94,36,114,36],[94,37,114,38,"state"],[94,42,114,43],[94,47,114,49],[95,6,114,51,"answersCount"],[95,18,114,63],[95,20,114,65,"state"],[95,25,114,70],[95,26,114,71,"answersCount"],[95,38,114,83],[95,41,114,86],[96,4,114,88],[96,5,114,89],[96,6,114,90],[96,7,114,91],[97,4,116,4,"resetAnswersCount"],[97,21,116,21],[97,23,116,23,"resetAnswersCount"],[97,24,116,23],[97,29,116,29,"set"],[97,32,116,32],[97,33,116,33],[98,6,116,35,"answersCount"],[98,18,116,47],[98,20,116,49],[99,4,116,51],[99,5,116,52],[99,6,116,53],[100,4,118,4,"setCachedDailyVerse"],[100,23,118,23],[100,25,118,25,"setCachedDailyVerse"],[100,26,118,26,"translationId"],[100,39,118,39],[100,41,118,41,"verse"],[100,46,118,46],[100,51,118,51],[101,6,119,6],[101,12,119,12,"key"],[101,15,119,15],[101,18,119,18],[101,32,119,32,"translationId"],[101,45,119,45],[101,47,119,47],[102,6,120,6,"set"],[102,9,120,9],[102,10,120,11,"state"],[102,15,120,16],[102,20,120,22],[103,8,121,8,"cachedDailyVerses"],[103,25,121,25],[103,27,121,27],[104,10,122,10],[104,13,122,13,"state"],[104,18,122,18],[104,19,122,19,"cachedDailyVerses"],[104,36,122,36],[105,10,123,10],[105,11,123,11,"key"],[105,14,123,14],[105,17,123,17],[106,12,124,12,"verse"],[106,17,124,17],[107,12,125,12,"updatedAt"],[107,21,125,21],[107,23,125,23],[107,27,125,27,"Date"],[107,31,125,31],[107,32,125,32],[107,33,125,33],[107,34,125,34,"toISOString"],[107,45,125,45],[107,46,125,46],[108,10,126,10],[109,8,127,8],[110,6,128,6],[110,7,128,7],[110,8,128,8],[110,9,128,9],[111,4,129,4],[111,5,129,5],[112,4,131,4,"getCachedDailyVerse"],[112,23,131,23],[112,25,131,26,"translationId"],[112,38,131,39],[112,42,131,44],[113,6,132,6],[113,12,132,12,"key"],[113,15,132,15],[113,18,132,18],[113,32,132,32,"translationId"],[113,45,132,45],[113,47,132,47],[114,6,133,6],[114,12,133,12,"cached"],[114,18,133,18],[114,21,133,21,"get"],[114,24,133,24],[114,25,133,25],[114,26,133,26],[114,27,133,27,"cachedDailyVerses"],[114,44,133,44],[114,45,133,45,"key"],[114,48,133,48],[114,49,133,49],[115,6,135,6],[115,10,135,10],[115,11,135,11,"cached"],[115,17,135,17],[115,19,135,19],[115,26,135,26],[115,30,135,30],[117,6,137,6],[118,6,138,6],[118,10,138,10,"isCachedVerseStale"],[118,28,138,28],[118,29,138,29,"cached"],[118,35,138,35],[118,36,138,36,"updatedAt"],[118,45,138,45],[118,46,138,46],[118,48,138,48],[119,8,139,8],[119,15,139,15],[119,19,139,19],[120,6,140,6],[121,6,142,6],[121,13,142,13,"cached"],[121,19,142,19],[122,4,143,4],[122,5,143,5],[123,4,145,4,"invalidateDailyVerseCache"],[123,29,145,29],[123,31,145,32,"translationId"],[123,44,145,45],[123,48,145,50],[124,6,146,6],[124,12,146,12,"key"],[124,15,146,15],[124,18,146,18],[124,32,146,32,"translationId"],[124,45,146,45],[124,47,146,47],[125,6,147,6,"set"],[125,9,147,9],[125,10,147,11,"state"],[125,15,147,16],[125,19,147,21],[126,8,148,8],[126,14,148,14,"newCache"],[126,22,148,22],[126,25,148,25],[127,10,148,27],[127,13,148,30,"state"],[127,18,148,35],[127,19,148,36,"cachedDailyVerses"],[128,8,148,54],[128,9,148,55],[129,8,149,8],[129,15,149,15,"newCache"],[129,23,149,23],[129,24,149,24,"key"],[129,27,149,27],[129,28,149,28],[130,8,150,8],[130,15,150,15],[131,10,150,17,"cachedDailyVerses"],[131,27,150,34],[131,29,150,36,"newCache"],[132,8,150,45],[132,9,150,46],[133,6,151,6],[133,7,151,7],[133,8,151,8],[134,4,152,4],[134,5,152,5],[135,4,154,4,"setShowPaywall"],[135,18,154,18],[135,20,154,21,"show"],[135,24,154,25],[135,28,154,30,"set"],[135,31,154,33],[135,32,154,34],[136,6,154,36,"showPaywall"],[136,17,154,47],[136,19,154,49,"show"],[137,4,154,54],[137,5,154,55],[137,6,154,56],[138,4,156,4],[139,4,157,4,"isSubscribed"],[139,16,157,16],[139,18,157,18,"isSubscribed"],[139,19,157,18],[139,24,157,24],[140,6,158,6],[140,12,158,12,"state"],[140,17,158,17],[140,20,158,20,"get"],[140,23,158,23],[140,24,158,24],[140,25,158,25],[141,6,159,6],[141,13,159,13,"state"],[141,18,159,18],[141,19,159,19,"subscriptionStatus"],[141,37,159,37],[141,42,159,42],[141,50,159,50],[141,54,159,54],[141,55,159,55,"state"],[141,60,159,60],[141,61,159,61,"needsServerValidation"],[141,82,159,82],[142,4,160,4],[142,5,160,5],[143,4,162,4,"isGated"],[143,11,162,11],[143,13,162,13,"isGated"],[143,14,162,13],[143,19,162,19],[144,6,163,6],[144,12,163,12,"state"],[144,17,163,17],[144,20,163,20,"get"],[144,23,163,23],[144,24,163,24],[144,25,163,25],[145,6,164,6],[145,13,164,13],[145,14,164,14,"get"],[145,17,164,17],[145,18,164,18],[145,19,164,19],[145,20,164,20,"isSubscribed"],[145,32,164,32],[145,33,164,33],[145,34,164,34],[145,38,164,38,"state"],[145,43,164,43],[145,44,164,44,"answersCount"],[145,56,164,56],[145,60,164,60],[145,61,164,61],[146,4,165,4],[147,2,166,2],[147,3,166,3],[147,4,166,4],[147,6,167,2],[148,4,168,4,"name"],[148,8,168,8],[148,10,168,10],[148,22,168,22],[149,4,169,4,"storage"],[149,11,169,11],[149,13,169,13],[149,17,169,13,"createJSONStorage"],[149,35,169,30],[149,36,169,30,"createJSONStorage"],[149,53,169,30],[149,55,169,31],[149,61,169,37,"AsyncStorage"],[149,73,169,49],[149,74,169,49,"default"],[149,81,169,49],[150,2,170,2],[150,3,171,0],[150,4,171,1],[150,5,171,2],[151,0,171,3],[151,3]],"functionMap":{"names":["<global>","isCachedVerseStale","persist$argument_0","setLocale","setTranslation","completeOnboarding","setSubscriptionStatus","setSubscription","resetSubscription","incrementAnswersCount","set$argument_0","resetAnswersCount","setCachedDailyVerse","getCachedDailyVerse","invalidateDailyVerseCache","setShowPaywall","isSubscribed","isGated","createJSONStorage$argument_0"],"mappings":"AAA;2BC6C;CDK;EEG;eCc;KDc;oBEE;KFU;wBGE,wCH;2BIE,+CJ;qBKE;MLK;uBME;MNK;2BOE,UC,qDD,CP;uBSE,8BT;yBUE;UFE;QEQ;KVC;yBWE;KXY;+BYE;UJE;OII;KZC;oBaE,oCb;kBcG;KdG;aeE;KfG;IFC;+BkBG,kBlB"},"hasCjsExports":false},"type":"js/module"}]}