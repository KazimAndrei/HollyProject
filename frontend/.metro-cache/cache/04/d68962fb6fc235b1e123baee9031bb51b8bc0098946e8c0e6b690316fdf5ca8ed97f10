{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":62},"end":{"line":4,"column":33,"index":95}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"zustand/middleware","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":96},"end":{"line":5,"column":64,"index":160}}],"key":"YMP0j6stqbYl0MJAKxYubYnfTz0=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":161},"end":{"line":6,"column":69,"index":230}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useUserStore\", {\n    enumerable: true,\n    get: function () {\n      return useUserStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _zustandMiddleware = require(_dependencyMap[1], \"zustand/middleware\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  /**\n   * User store with Zustand + AsyncStorage persistence\n   */\n\n  // Check if cached verse is stale (> 24h)\n  var isCachedVerseStale = updatedAt => {\n    var cached = new Date(updatedAt);\n    var now = new Date();\n    var diffHours = (now.getTime() - cached.getTime()) / (1000 * 60 * 60);\n    return diffHours > 24;\n  };\n  var useUserStore = (0, _zustand.create)()((0, _zustandMiddleware.persist)((set, get) => ({\n    // Initial state\n    locale: 'en',\n    translation: 'kjv',\n    onboardingCompleted: false,\n    subscriptionStatus: 'free',\n    needsServerValidation: false,\n    originalTransactionId: undefined,\n    trialEndsAt: undefined,\n    answersCount: 0,\n    cachedDailyVerses: {},\n    showPaywall: false,\n    // Actions\n    setLocale: locale => {\n      var state = get();\n      var oldTranslation = state.translation;\n      set({\n        locale\n      });\n\n      // Update translation based on locale\n      var newTranslation = locale === 'en' ? 'kjv' : 'rst';\n      set({\n        translation: newTranslation\n      });\n\n      // Invalidate old translation cache when switching\n      if (oldTranslation !== newTranslation) {\n        get().invalidateDailyVerseCache(oldTranslation);\n      }\n    },\n    setTranslation: translation => {\n      var state = get();\n      var oldTranslation = state.translation;\n      set({\n        translation\n      });\n\n      // Invalidate old translation cache\n      if (oldTranslation !== translation) {\n        get().invalidateDailyVerseCache(oldTranslation);\n      }\n    },\n    completeOnboarding: () => set({\n      onboardingCompleted: true\n    }),\n    setSubscriptionStatus: status => set({\n      subscriptionStatus: status\n    }),\n    setSubscription: data => set({\n      subscriptionStatus: data.status,\n      needsServerValidation: data.needsServerValidation ?? false,\n      trialEndsAt: data.trialEndsAt,\n      originalTransactionId: data.originalTransactionId\n    }),\n    resetSubscription: () => set({\n      subscriptionStatus: 'free',\n      needsServerValidation: false,\n      trialEndsAt: undefined,\n      originalTransactionId: undefined\n    }),\n    incrementAnswersCount: () => set(state => ({\n      answersCount: state.answersCount + 1\n    })),\n    resetAnswersCount: () => set({\n      answersCount: 0\n    }),\n    setCachedDailyVerse: (translationId, verse) => {\n      var key = `dailyVerse:${translationId}`;\n      set(state => ({\n        cachedDailyVerses: {\n          ...state.cachedDailyVerses,\n          [key]: {\n            verse,\n            updatedAt: new Date().toISOString()\n          }\n        }\n      }));\n    },\n    getCachedDailyVerse: translationId => {\n      var key = `dailyVerse:${translationId}`;\n      var cached = get().cachedDailyVerses[key];\n      if (!cached) return null;\n\n      // Check if stale\n      if (isCachedVerseStale(cached.updatedAt)) {\n        return null;\n      }\n      return cached;\n    },\n    invalidateDailyVerseCache: translationId => {\n      var key = `dailyVerse:${translationId}`;\n      set(state => {\n        var newCache = {\n          ...state.cachedDailyVerses\n        };\n        delete newCache[key];\n        return {\n          cachedDailyVerses: newCache\n        };\n      });\n    },\n    setShowPaywall: show => set({\n      showPaywall: show\n    }),\n    // Computed selectors\n    isSubscribed: () => {\n      var state = get();\n      return state.subscriptionStatus === 'active' && !state.needsServerValidation;\n    },\n    isGated: () => {\n      var state = get();\n      return !get().isSubscribed() && state.answersCount >= 2;\n    },\n    getOriginalTransactionId: () => {\n      return get().originalTransactionId;\n    }\n  }), {\n    name: 'bc_user_v1',\n    storage: (0, _zustandMiddleware.createJSONStorage)(() => AsyncStorage.default)\n  }));\n});","lineCount":154,"map":[[12,2,54,0,"Object"],[12,8,54,0],[12,9,54,0,"defineProperty"],[12,23,54,0],[12,24,54,0,"exports"],[12,31,54,0],[13,4,54,0,"enumerable"],[13,14,54,0],[14,4,54,0,"get"],[14,7,54,0],[14,18,54,0,"get"],[14,19,54,0],[15,6,54,0],[15,13,54,0,"useUserStore"],[15,25,54,0],[16,4,54,0],[17,2,54,0],[18,2,4,0],[18,6,4,0,"_zustand"],[18,14,4,0],[18,17,4,0,"require"],[18,24,4,0],[18,25,4,0,"_dependencyMap"],[18,39,4,0],[19,2,5,0],[19,6,5,0,"_zustandMiddleware"],[19,24,5,0],[19,27,5,0,"require"],[19,34,5,0],[19,35,5,0,"_dependencyMap"],[19,49,5,0],[20,2,6,0],[20,6,6,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,6,0],[20,45,6,0,"require"],[20,52,6,0],[20,53,6,0,"_dependencyMap"],[20,67,6,0],[21,2,6,0],[21,6,6,0,"AsyncStorage"],[21,18,6,0],[21,21,6,0,"_interopDefault"],[21,36,6,0],[21,37,6,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,6,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[26,2,46,0],[27,2,47,0],[27,6,47,6,"isCachedVerseStale"],[27,24,47,24],[27,27,47,28,"updatedAt"],[27,36,47,45],[27,40,47,59],[28,4,48,2],[28,8,48,8,"cached"],[28,14,48,14],[28,17,48,17],[28,21,48,21,"Date"],[28,25,48,25],[28,26,48,26,"updatedAt"],[28,35,48,35],[28,36,48,36],[29,4,49,2],[29,8,49,8,"now"],[29,11,49,11],[29,14,49,14],[29,18,49,18,"Date"],[29,22,49,22],[29,23,49,23],[29,24,49,24],[30,4,50,2],[30,8,50,8,"diffHours"],[30,17,50,17],[30,20,50,20],[30,21,50,21,"now"],[30,24,50,24],[30,25,50,25,"getTime"],[30,32,50,32],[30,33,50,33],[30,34,50,34],[30,37,50,37,"cached"],[30,43,50,43],[30,44,50,44,"getTime"],[30,51,50,51],[30,52,50,52],[30,53,50,53],[30,58,50,58],[30,62,50,62],[30,65,50,65],[30,67,50,67],[30,70,50,70],[30,72,50,72],[30,73,50,73],[31,4,51,2],[31,11,51,9,"diffHours"],[31,20,51,18],[31,23,51,21],[31,25,51,23],[32,2,52,0],[32,3,52,1],[33,2,54,7],[33,6,54,13,"useUserStore"],[33,18,54,25],[33,21,54,28],[33,25,54,28,"create"],[33,33,54,34],[33,34,54,34,"create"],[33,40,54,34],[33,42,54,46],[33,43,54,47],[33,44,54,48],[33,48,54,48,"persist"],[33,66,54,55],[33,67,54,55,"persist"],[33,74,54,55],[33,76,55,2],[33,77,55,3,"set"],[33,80,55,6],[33,82,55,8,"get"],[33,85,55,11],[33,91,55,17],[34,4,56,4],[35,4,57,4,"locale"],[35,10,57,10],[35,12,57,12],[35,16,57,16],[36,4,58,4,"translation"],[36,15,58,15],[36,17,58,17],[36,22,58,22],[37,4,59,4,"onboardingCompleted"],[37,23,59,23],[37,25,59,25],[37,30,59,30],[38,4,60,4,"subscriptionStatus"],[38,22,60,22],[38,24,60,24],[38,30,60,30],[39,4,61,4,"needsServerValidation"],[39,25,61,25],[39,27,61,27],[39,32,61,32],[40,4,62,4,"originalTransactionId"],[40,25,62,25],[40,27,62,27,"undefined"],[40,36,62,36],[41,4,63,4,"trialEndsAt"],[41,15,63,15],[41,17,63,17,"undefined"],[41,26,63,26],[42,4,64,4,"answersCount"],[42,16,64,16],[42,18,64,18],[42,19,64,19],[43,4,65,4,"cachedDailyVerses"],[43,21,65,21],[43,23,65,23],[43,24,65,24],[43,25,65,25],[44,4,66,4,"showPaywall"],[44,15,66,15],[44,17,66,17],[44,22,66,22],[45,4,68,4],[46,4,69,4,"setLocale"],[46,13,69,13],[46,15,69,16,"locale"],[46,21,69,22],[46,25,69,27],[47,6,70,6],[47,10,70,12,"state"],[47,15,70,17],[47,18,70,20,"get"],[47,21,70,23],[47,22,70,24],[47,23,70,25],[48,6,71,6],[48,10,71,12,"oldTranslation"],[48,24,71,26],[48,27,71,29,"state"],[48,32,71,34],[48,33,71,35,"translation"],[48,44,71,46],[49,6,73,6,"set"],[49,9,73,9],[49,10,73,10],[50,8,73,12,"locale"],[51,6,73,19],[51,7,73,20],[51,8,73,21],[53,6,75,6],[54,6,76,6],[54,10,76,12,"newTranslation"],[54,24,76,26],[54,27,76,29,"locale"],[54,33,76,35],[54,38,76,40],[54,42,76,44],[54,45,76,47],[54,50,76,52],[54,53,76,55],[54,58,76,60],[55,6,77,6,"set"],[55,9,77,9],[55,10,77,10],[56,8,77,12,"translation"],[56,19,77,23],[56,21,77,25,"newTranslation"],[57,6,77,40],[57,7,77,41],[57,8,77,42],[59,6,79,6],[60,6,80,6],[60,10,80,10,"oldTranslation"],[60,24,80,24],[60,29,80,29,"newTranslation"],[60,43,80,43],[60,45,80,45],[61,8,81,8,"get"],[61,11,81,11],[61,12,81,12],[61,13,81,13],[61,14,81,14,"invalidateDailyVerseCache"],[61,39,81,39],[61,40,81,40,"oldTranslation"],[61,54,81,54],[61,55,81,55],[62,6,82,6],[63,4,83,4],[63,5,83,5],[64,4,85,4,"setTranslation"],[64,18,85,18],[64,20,85,21,"translation"],[64,31,85,32],[64,35,85,37],[65,6,86,6],[65,10,86,12,"state"],[65,15,86,17],[65,18,86,20,"get"],[65,21,86,23],[65,22,86,24],[65,23,86,25],[66,6,87,6],[66,10,87,12,"oldTranslation"],[66,24,87,26],[66,27,87,29,"state"],[66,32,87,34],[66,33,87,35,"translation"],[66,44,87,46],[67,6,89,6,"set"],[67,9,89,9],[67,10,89,10],[68,8,89,12,"translation"],[69,6,89,24],[69,7,89,25],[69,8,89,26],[71,6,91,6],[72,6,92,6],[72,10,92,10,"oldTranslation"],[72,24,92,24],[72,29,92,29,"translation"],[72,40,92,40],[72,42,92,42],[73,8,93,8,"get"],[73,11,93,11],[73,12,93,12],[73,13,93,13],[73,14,93,14,"invalidateDailyVerseCache"],[73,39,93,39],[73,40,93,40,"oldTranslation"],[73,54,93,54],[73,55,93,55],[74,6,94,6],[75,4,95,4],[75,5,95,5],[76,4,97,4,"completeOnboarding"],[76,22,97,22],[76,24,97,24,"completeOnboarding"],[76,25,97,24],[76,30,97,30,"set"],[76,33,97,33],[76,34,97,34],[77,6,97,36,"onboardingCompleted"],[77,25,97,55],[77,27,97,57],[78,4,97,62],[78,5,97,63],[78,6,97,64],[79,4,99,4,"setSubscriptionStatus"],[79,25,99,25],[79,27,99,28,"status"],[79,33,99,34],[79,37,99,39,"set"],[79,40,99,42],[79,41,99,43],[80,6,99,45,"subscriptionStatus"],[80,24,99,63],[80,26,99,65,"status"],[81,4,99,72],[81,5,99,73],[81,6,99,74],[82,4,101,4,"setSubscription"],[82,19,101,19],[82,21,101,22,"data"],[82,25,101,26],[82,29,101,31,"set"],[82,32,101,34],[82,33,101,35],[83,6,102,6,"subscriptionStatus"],[83,24,102,24],[83,26,102,26,"data"],[83,30,102,30],[83,31,102,31,"status"],[83,37,102,37],[84,6,103,6,"needsServerValidation"],[84,27,103,27],[84,29,103,29,"data"],[84,33,103,33],[84,34,103,34,"needsServerValidation"],[84,55,103,55],[84,59,103,59],[84,64,103,64],[85,6,104,6,"trialEndsAt"],[85,17,104,17],[85,19,104,19,"data"],[85,23,104,23],[85,24,104,24,"trialEndsAt"],[85,35,104,35],[86,6,105,6,"originalTransactionId"],[86,27,105,27],[86,29,105,29,"data"],[86,33,105,33],[86,34,105,34,"originalTransactionId"],[87,4,106,4],[87,5,106,5],[87,6,106,6],[88,4,108,4,"resetSubscription"],[88,21,108,21],[88,23,108,23,"resetSubscription"],[88,24,108,23],[88,29,108,29,"set"],[88,32,108,32],[88,33,108,33],[89,6,109,6,"subscriptionStatus"],[89,24,109,24],[89,26,109,26],[89,32,109,32],[90,6,110,6,"needsServerValidation"],[90,27,110,27],[90,29,110,29],[90,34,110,34],[91,6,111,6,"trialEndsAt"],[91,17,111,17],[91,19,111,19,"undefined"],[91,28,111,28],[92,6,112,6,"originalTransactionId"],[92,27,112,27],[92,29,112,29,"undefined"],[93,4,113,4],[93,5,113,5],[93,6,113,6],[94,4,115,4,"incrementAnswersCount"],[94,25,115,25],[94,27,115,27,"incrementAnswersCount"],[94,28,115,27],[94,33,115,33,"set"],[94,36,115,36],[94,37,115,38,"state"],[94,42,115,43],[94,47,115,49],[95,6,115,51,"answersCount"],[95,18,115,63],[95,20,115,65,"state"],[95,25,115,70],[95,26,115,71,"answersCount"],[95,38,115,83],[95,41,115,86],[96,4,115,88],[96,5,115,89],[96,6,115,90],[96,7,115,91],[97,4,117,4,"resetAnswersCount"],[97,21,117,21],[97,23,117,23,"resetAnswersCount"],[97,24,117,23],[97,29,117,29,"set"],[97,32,117,32],[97,33,117,33],[98,6,117,35,"answersCount"],[98,18,117,47],[98,20,117,49],[99,4,117,51],[99,5,117,52],[99,6,117,53],[100,4,119,4,"setCachedDailyVerse"],[100,23,119,23],[100,25,119,25,"setCachedDailyVerse"],[100,26,119,26,"translationId"],[100,39,119,39],[100,41,119,41,"verse"],[100,46,119,46],[100,51,119,51],[101,6,120,6],[101,10,120,12,"key"],[101,13,120,15],[101,16,120,18],[101,30,120,32,"translationId"],[101,43,120,45],[101,45,120,47],[102,6,121,6,"set"],[102,9,121,9],[102,10,121,11,"state"],[102,15,121,16],[102,20,121,22],[103,8,122,8,"cachedDailyVerses"],[103,25,122,25],[103,27,122,27],[104,10,123,10],[104,13,123,13,"state"],[104,18,123,18],[104,19,123,19,"cachedDailyVerses"],[104,36,123,36],[105,10,124,10],[105,11,124,11,"key"],[105,14,124,14],[105,17,124,17],[106,12,125,12,"verse"],[106,17,125,17],[107,12,126,12,"updatedAt"],[107,21,126,21],[107,23,126,23],[107,27,126,27,"Date"],[107,31,126,31],[107,32,126,32],[107,33,126,33],[107,34,126,34,"toISOString"],[107,45,126,45],[107,46,126,46],[108,10,127,10],[109,8,128,8],[110,6,129,6],[110,7,129,7],[110,8,129,8],[110,9,129,9],[111,4,130,4],[111,5,130,5],[112,4,132,4,"getCachedDailyVerse"],[112,23,132,23],[112,25,132,26,"translationId"],[112,38,132,39],[112,42,132,44],[113,6,133,6],[113,10,133,12,"key"],[113,13,133,15],[113,16,133,18],[113,30,133,32,"translationId"],[113,43,133,45],[113,45,133,47],[114,6,134,6],[114,10,134,12,"cached"],[114,16,134,18],[114,19,134,21,"get"],[114,22,134,24],[114,23,134,25],[114,24,134,26],[114,25,134,27,"cachedDailyVerses"],[114,42,134,44],[114,43,134,45,"key"],[114,46,134,48],[114,47,134,49],[115,6,136,6],[115,10,136,10],[115,11,136,11,"cached"],[115,17,136,17],[115,19,136,19],[115,26,136,26],[115,30,136,30],[117,6,138,6],[118,6,139,6],[118,10,139,10,"isCachedVerseStale"],[118,28,139,28],[118,29,139,29,"cached"],[118,35,139,35],[118,36,139,36,"updatedAt"],[118,45,139,45],[118,46,139,46],[118,48,139,48],[119,8,140,8],[119,15,140,15],[119,19,140,19],[120,6,141,6],[121,6,143,6],[121,13,143,13,"cached"],[121,19,143,19],[122,4,144,4],[122,5,144,5],[123,4,146,4,"invalidateDailyVerseCache"],[123,29,146,29],[123,31,146,32,"translationId"],[123,44,146,45],[123,48,146,50],[124,6,147,6],[124,10,147,12,"key"],[124,13,147,15],[124,16,147,18],[124,30,147,32,"translationId"],[124,43,147,45],[124,45,147,47],[125,6,148,6,"set"],[125,9,148,9],[125,10,148,11,"state"],[125,15,148,16],[125,19,148,21],[126,8,149,8],[126,12,149,14,"newCache"],[126,20,149,22],[126,23,149,25],[127,10,149,27],[127,13,149,30,"state"],[127,18,149,35],[127,19,149,36,"cachedDailyVerses"],[128,8,149,54],[128,9,149,55],[129,8,150,8],[129,15,150,15,"newCache"],[129,23,150,23],[129,24,150,24,"key"],[129,27,150,27],[129,28,150,28],[130,8,151,8],[130,15,151,15],[131,10,151,17,"cachedDailyVerses"],[131,27,151,34],[131,29,151,36,"newCache"],[132,8,151,45],[132,9,151,46],[133,6,152,6],[133,7,152,7],[133,8,152,8],[134,4,153,4],[134,5,153,5],[135,4,155,4,"setShowPaywall"],[135,18,155,18],[135,20,155,21,"show"],[135,24,155,25],[135,28,155,30,"set"],[135,31,155,33],[135,32,155,34],[136,6,155,36,"showPaywall"],[136,17,155,47],[136,19,155,49,"show"],[137,4,155,54],[137,5,155,55],[137,6,155,56],[138,4,157,4],[139,4,158,4,"isSubscribed"],[139,16,158,16],[139,18,158,18,"isSubscribed"],[139,19,158,18],[139,24,158,24],[140,6,159,6],[140,10,159,12,"state"],[140,15,159,17],[140,18,159,20,"get"],[140,21,159,23],[140,22,159,24],[140,23,159,25],[141,6,160,6],[141,13,160,13,"state"],[141,18,160,18],[141,19,160,19,"subscriptionStatus"],[141,37,160,37],[141,42,160,42],[141,50,160,50],[141,54,160,54],[141,55,160,55,"state"],[141,60,160,60],[141,61,160,61,"needsServerValidation"],[141,82,160,82],[142,4,161,4],[142,5,161,5],[143,4,163,4,"isGated"],[143,11,163,11],[143,13,163,13,"isGated"],[143,14,163,13],[143,19,163,19],[144,6,164,6],[144,10,164,12,"state"],[144,15,164,17],[144,18,164,20,"get"],[144,21,164,23],[144,22,164,24],[144,23,164,25],[145,6,165,6],[145,13,165,13],[145,14,165,14,"get"],[145,17,165,17],[145,18,165,18],[145,19,165,19],[145,20,165,20,"isSubscribed"],[145,32,165,32],[145,33,165,33],[145,34,165,34],[145,38,165,38,"state"],[145,43,165,43],[145,44,165,44,"answersCount"],[145,56,165,56],[145,60,165,60],[145,61,165,61],[146,4,166,4],[146,5,166,5],[147,4,168,4,"getOriginalTransactionId"],[147,28,168,28],[147,30,168,30,"getOriginalTransactionId"],[147,31,168,30],[147,36,168,36],[148,6,169,6],[148,13,169,13,"get"],[148,16,169,16],[148,17,169,17],[148,18,169,18],[148,19,169,19,"originalTransactionId"],[148,40,169,40],[149,4,170,4],[150,2,171,2],[150,3,171,3],[150,4,171,4],[150,6,172,2],[151,4,173,4,"name"],[151,8,173,8],[151,10,173,10],[151,22,173,22],[152,4,174,4,"storage"],[152,11,174,11],[152,13,174,13],[152,17,174,13,"createJSONStorage"],[152,35,174,30],[152,36,174,30,"createJSONStorage"],[152,53,174,30],[152,55,174,31],[152,61,174,37,"AsyncStorage"],[152,73,174,49],[152,74,174,49,"default"],[152,81,174,49],[153,2,175,2],[153,3,176,0],[153,4,176,1],[153,5,176,2],[154,0,176,3],[154,3]],"functionMap":{"names":["<global>","isCachedVerseStale","persist$argument_0","setLocale","setTranslation","completeOnboarding","setSubscriptionStatus","setSubscription","resetSubscription","incrementAnswersCount","set$argument_0","resetAnswersCount","setCachedDailyVerse","getCachedDailyVerse","invalidateDailyVerseCache","setShowPaywall","isSubscribed","isGated","getOriginalTransactionId","createJSONStorage$argument_0"],"mappings":"AAA;2BC8C;CDK;EEG;eCc;KDc;oBEE;KFU;wBGE,wCH;2BIE,+CJ;qBKE;MLK;uBME;MNK;2BOE,UC,qDD,CP;uBSE,8BT;yBUE;UFE;QEQ;KVC;yBWE;KXY;+BYE;UJE;OII;KZC;oBaE,oCb;kBcG;KdG;aeE;KfG;8BgBE;KhBE;IFC;+BmBG,kBnB"},"hasCjsExports":false},"type":"js/module"}]}